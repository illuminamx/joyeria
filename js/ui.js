document.addEventListener('contextmenu',e=>e.preventDefault());let mainModalInstance,ticketModalInstance,cartOffcanvasInstance;function scrollToTop(e){e.preventDefault();window.scrollTo({top:0,behavior:'smooth'})}
function scrollToSection(e){const t=document.getElementById(e),n=80,o=document.body.getBoundingClientRect().top,i=t.getBoundingClientRect().top,a=i-o,r=a-n;window.scrollTo({top:r,behavior:"smooth"})}
document.getElementById('themeToggle').addEventListener('click',()=>{const e=document.documentElement,t=e.getAttribute('data-theme')==='dark',n=t?'light':'dark';e.setAttribute('data-theme',n);document.querySelector('#themeToggle i').className=t?'bi bi-moon-stars':'bi bi-sun';localStorage.setItem('illuminaTheme',n)});
function acceptCookies(){localStorage.setItem('illuminaCookies','true');document.getElementById('cookieBanner').classList.remove('show')}
function openCategory(e){if(window.event)window.event.preventDefault();const t=document.getElementById('modalTarget'),n=document.getElementById('mainModal');n.classList.remove('caracteristicas-mode');t.scrollTop=0;let o=`<div class="p-4 p-md-5 animate-fade-down"><h2 class="text-center ls-5 mb-5 text-uppercase fw-light">${e}</h2><div class="product-grid">`;productos[e].forEach(n=>{o+=`<div class="product-item text-center animate-fade-down" onclick="showProduct('${e}', ${n.id})" style="cursor:pointer"><img src="imgs/${e}/${n.prefix}-${n.slug}-illumina.png" class="img-fluid mb-3" style="max-height: 220px; border-radius:15px;"><p class="mb-1 small ls-2 fw-light text-uppercase">${n.prefix} ${n.name}</p><p class="gold-text fw-bold">$${n.price}</p></div>`});o+=`</div></div>`;t.innerHTML=o;mainModalInstance.show()}
function showProduct(e,t){const n=productos[e].find(e=>e.id===t),o=document.getElementById('modalTarget'),i=document.getElementById('mainModal'),a=`imgs/${e}/${n.prefix}-${n.slug}-illumina`;i.classList.add('caracteristicas-mode');o.scrollTop=0;o.innerHTML=`<div class="row g-0 animate-fade-down"><div class="col-md-7 p-4 p-lg-5 d-flex align-items-center position-relative"><div id="pCarousel" class="carousel slide w-100" data-bs-ride="carousel"><div class="carousel-inner"><div class="carousel-item active"><img src="${a}.png" class="d-block w-100 rounded-3"></div><div class="carousel-item"><img src="${a}-Cerca.png" class="d-block w-100 rounded-3"></div></div><button class="carousel-control-prev" data-bs-target="#pCarousel" data-bs-slide="prev"><span class="carousel-control-prev-icon"></span></button><button class="carousel-control-next" data-bs-target="#pCarousel" data-bs-slide="next"><span class="carousel-control-next-icon"></span></button></div></div><div class="col-md-5 p-4 p-lg-5 d-flex flex-column justify-content-center"><button class="btn btn-sm btn-back mb-4 text-start" style="width: fit-content;" onclick="openCategory('${e}')">← Volver al catálogo</button><h2 class="fw-light ls-3 mb-3">${n.prefix} ${n.name}</h2><h3 class="gold-text mb-4">$${n.price}</h3><p class="small opacity-50 mb-4 lh-lg">Diseño ergonómico con acabados de alta joyería. Cada pieza es revisada individualmente para garantizar el brillo característico de ILLÚMINA.</p><ul class="list-unstyled small opacity-75 mb-5"><li><i class="bi bi-gem me-2"></i> Plata Ley .925 Mexicana</li><li><i class="bi bi-stars me-2"></i> Acabado Pulido Espejo</li><li><i class="bi bi-shield-check me-2"></i> Garantía de autenticidad</li></ul><button onclick="addToCart(${n.id}, '${e}')" class="btn-gold">Añadir a la bolsa</button></div></div>`}
function toggleDeliveryForm(){const e=document.getElementById('deliveryToggle').checked,t=document.getElementById('deliveryFormContainer');if(e){t.classList.add('open')}else{t.classList.remove('open')}}
function openLegal(e){const t=document.getElementById('modalTarget'),n=document.getElementById('mainModal');n.classList.add('caracteristicas-mode');let o=e==='terminos'?'Términos y Condiciones':'Políticas de Envío',i="";if(e==='terminos'){i=`En ILLÚMINA, con sede en CDMX, la excelencia es nuestro estándar. Nuestros precios incluyen impuestos y el pago se realiza mediante transferencia bancaria. Cada pieza de <strong>plata ley 925 mexicana</strong> es sometida a un riguroso control de calidad antes de ser enviada para asegurar su integridad. Una vez cerrado el pedido, <strong>no se aceptan reembolsos ni cancelaciones</strong>, salvo por defectos de fábrica comprobables.`}else{i=`En ILLÚMINA nos aseguramos de que tu joyería llegue segura. Realizamos envíos a todo México desde la CDMX. Cada orden es <strong>empacada cuidadosamente y verificada</strong> tras confirmar tu depósito o transferencia. Una vez que el paquete es entregado a la mensajería, te proporcionaremos un número de guía para su rastreo.`}t.innerHTML=`<div class="p-4 p-md-5 text-center animate-fade-down"><h2 class="ls-3 gold-text mb-4 text-uppercase fw-light" style="font-family: 'Cinzel', serif;">${o}</h2><div class="opacity-75 lh-lg mb-5 small text-start mx-auto" style="max-width: 700px;">${i}</div><button class="btn-gold px-5" data-bs-dismiss="modal">Entendido</button></div>`;mainModalInstance.show()}